<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrivateGPT</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">🔒</span>
                    <span class="logo-text">PrivateGPT</span>
                </div>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle" title="Toggle Theme">
                        🌙
                    </button>
                    <button class="clear-btn" id="clearBtn" title="Clear Chat">
                        🗑️
                    </button>
                </div>
            </div>
        </div>

        <!-- Privacy Notice -->
        <div class="privacy-notice">
            <span class="privacy-icon">🛡️</span>
            <span class="privacy-text">You're using your own API key. Your data stays on your device.</span>
        </div>

        <!-- API Key Setup -->
        <div class="api-key-section" id="apiKeySection">
            <div class="api-key-header">
                <span class="key-icon">🔑</span>
                <span>OpenAI API Key</span>
                <button class="toggle-key-btn" id="toggleKeyBtn" title="Show/Hide API Key">👁️</button>
            </div>
            <div class="api-key-input-wrapper">
                <input 
                    type="password" 
                    class="api-key-input" 
                    id="apiKeyInput"
                    placeholder="sk-..."
                    autocomplete="off"
                    spellcheck="false"
                >
                <button class="save-key-btn" id="saveKeyBtn">Save</button>
            </div>
            <div class="api-key-status" id="apiKeyStatus"></div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container" id="chatContainer">
            <div class="welcome-message">
                <div class="welcome-icon">✨</div>
                <h2>Welcome to PrivateGPT</h2>
                <p>Enter your OpenAI API key above to start chatting securely. No data is stored or tracked.</p>
            </div>
        </div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-wrapper">
                <textarea 
                    class="message-input" 
                    id="messageInput"
                    placeholder="Type your message..."
                    rows="1"
                    disabled
                ></textarea>
                <button class="send-btn" id="sendBtn" disabled title="Send message">
                    <span class="send-icon">➤</span>
                </button>
            </div>
            <div class="input-footer">
                <div class="model-info">
                    <span id="modelName">GPT-3.5 Turbo</span>
                </div>
                <div class="char-counter">
                    <span id="charCount">0</span> chars
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="connection-status">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Ready</span>
            </div>
            <div class="token-info" id="tokenInfo" style="display: none;">
                <span>~<span id="tokenCount">0</span> tokens</span>
            </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>