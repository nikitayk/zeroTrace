<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrivateGPT Pro</title>
    <link rel="stylesheet" href="styles/popup.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn" id="newChatBtn">
                    <span class="icon">‚ûï</span>
                    <span>New Chat</span>
                </button>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <span class="icon">üìã</span>
                </button>
            </div>

            <div class="chat-history" id="chatHistory">
                <div class="history-section">
                    <h3>Today</h3>
                    <div class="chat-item active">
                        <span class="chat-title">Welcome Chat</span>
                        <button class="chat-options">‚ãØ</button>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="settings-btn" id="settingsBtn">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </button>
                <button class="upgrade-btn" id="upgradeBtn">
                    <span class="icon">‚≠ê</span>
                    <span>Upgrade to Pro</span>
                </button>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="chat-header">
                <div class="header-left">
                    <button class="sidebar-toggle mobile" id="mobileSidebarToggle">
                        <span class="icon">‚ò∞</span>
                    </button>
                    <div class="model-selector">
                        <select id="modelSelect" class="model-dropdown">
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-4-turbo">GPT-4 Turbo</option>
                            <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo</option>
                            <option value="claude-3-sonnet">Claude 3 Sonnet</option>
                            <option value="claude-3-haiku">Claude 3 Haiku</option>
                            <option value="gemini-pro">Gemini Pro</option>
                        </select>
                    </div>
                </div>
                <div class="header-right">
                    <button class="header-btn" id="shareBtn" title="Share Chat">
                        <span class="icon">üîó</span>
                    </button>
                    <button class="header-btn" id="themeToggle" title="Toggle Theme">
                        <span class="icon">üåô</span>
                    </button>
                </div>
            </header>

            <!-- Chat Messages -->
            <div class="chat-container" id="chatContainer">
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-content">
                        <div class="logo-container">
                            <div class="logo">ü§ñ</div>
                            <h1>PrivateGPT Pro</h1>
                            <p>Your private AI assistant with ChatGPT Pro features</p>
                        </div>

                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon">üîí</div>
                                <h3>100% Private</h3>
                                <p>Your conversations never leave your device</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üìÅ</div>
                                <h3>File Upload</h3>
                                <p>Analyze documents, images, and code files</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üíª</div>
                                <h3>Code Execution</h3>
                                <p>Run and debug code in multiple languages</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üé®</div>
                                <h3>Image Generation</h3>
                                <p>Create images with DALL-E integration</p>
                            </div>
                        </div>

                        <div class="quick-actions">
                            <button class="quick-action" data-prompt="Explain quantum computing in simple terms">
                                <span class="icon">üî¨</span>
                                <span>Explain quantum computing</span>
                            </button>
                            <button class="quick-action" data-prompt="Write a Python function to sort an array">
                                <span class="icon">üêç</span>
                                <span>Write Python code</span>
                            </button>
                            <button class="quick-action" data-prompt="Help me debug this JavaScript error">
                                <span class="icon">üêõ</span>
                                <span>Debug code</span>
                            </button>
                            <button class="quick-action" data-prompt="Create a business plan for a tech startup">
                                <span class="icon">üíº</span>
                                <span>Business planning</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Messages will be inserted here -->
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <div class="input-attachments" id="inputAttachments"></div>
                    
                    <div class="input-wrapper">
                        <div class="input-actions">
                            <button class="action-btn" id="attachBtn" title="Attach file">
                                <span class="icon">üìé</span>
                            </button>
                            <input type="file" id="fileInput" multiple accept=".txt,.pdf,.doc,.docx,.py,.js,.html,.css,.json,.csv,.md" style="display: none;">
                            
                            <button class="action-btn" id="codeBtn" title="Code mode">
                                <span class="icon">üíª</span>
                            </button>
                            
                            <button class="action-btn" id="imageBtn" title="Generate image">
                                <span class="icon">üé®</span>
                            </button>
                        </div>

                        <div class="input-field-container">
                            <textarea 
                                id="messageInput" 
                                class="message-input" 
                                placeholder="Message PrivateGPT Pro..."
                                rows="1"
                                maxlength="32000"
                            ></textarea>
                            
                            <button class="send-btn" id="sendBtn" disabled>
                                <span class="icon">‚û§</span>
                            </button>
                        </div>
                    </div>

                    <div class="input-footer">
                        <div class="input-info">
                            <span class="privacy-indicator">üîí Private & Secure</span>
                            <span class="char-count" id="charCount">0/32000</span>
                        </div>
                        <div class="input-shortcuts">
                            <span>Enter to send ‚Ä¢ Shift+Enter for new line</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="close-btn" id="closeSettings">‚úï</button>
            </div>
            
            <div class="modal-content">
                <div class="settings-section">
                    <h3>API Configuration</h3>
                    
                    <div class="setting-group">
                        <label for="openaiKey">OpenAI API Key</label>
                        <div class="key-input-wrapper">
                            <input type="password" id="openaiKey" placeholder="sk-..." class="api-key-input">
                            <button class="toggle-visibility" data-target="openaiKey">üëÅÔ∏è</button>
                        </div>
                        <p class="setting-description">Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a></p>
                    </div>

                    <div class="setting-group">
                        <label for="claudeKey">Claude API Key (Optional)</label>
                        <div class="key-input-wrapper">
                            <input type="password" id="claudeKey" placeholder="sk-ant-..." class="api-key-input">
                            <button class="toggle-visibility" data-target="claudeKey">üëÅÔ∏è</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label for="geminiKey">Gemini API Key (Optional)</label>
                        <div class="key-input-wrapper">
                            <input type="password" id="geminiKey" placeholder="AI..." class="api-key-input">
                            <button class="toggle-visibility" data-target="geminiKey">üëÅÔ∏è</button>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Chat Preferences</h3>
                    
                    <div class="setting-group">
                        <label for="systemPrompt">System Prompt</label>
                        <textarea id="systemPrompt" rows="3" placeholder="You are a helpful AI assistant..."></textarea>
                    </div>

                    <div class="setting-group">
                        <label for="temperature">Creativity Level</label>
                        <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
                        <div class="range-labels">
                            <span>Focused</span>
                            <span>Balanced</span>
                            <span>Creative</span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="codeHighlighting" checked>
                            <span class="checkmark"></span>
                            Enable code syntax highlighting
                        </label>
                    </div>

                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="streamResponse" checked>
                            <span class="checkmark"></span>
                            Stream responses (real-time)
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Privacy & Security</h3>
                    
                    <div class="privacy-info">
                        <div class="privacy-item">
                            <span class="privacy-icon">üîí</span>
                            <div>
                                <strong>Zero Data Storage</strong>
                                <p>Your conversations are never saved or logged</p>
                            </div>
                        </div>
                        <div class="privacy-item">
                            <span class="privacy-icon">üõ°Ô∏è</span>
                            <div>
                                <strong>Local Processing</strong>
                                <p>API keys stored locally in your browser only</p>
                            </div>
                        </div>
                        <div class="privacy-item">
                            <span class="privacy-icon">üö´</span>
                            <div>
                                <strong>No Telemetry</strong>
                                <p>No tracking, analytics, or data collection</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-secondary" id="resetSettings">Reset to Defaults</button>
                <button class="btn-primary" id="saveSettings">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- File Preview Modal -->
    <div class="modal-overlay" id="filePreviewModal">
        <div class="modal large">
            <div class="modal-header">
                <h2>File Preview</h2>
                <button class="close-btn" id="closeFilePreview">‚úï</button>
            </div>
            <div class="modal-content">
                <div id="filePreviewContent"></div>
            </div>
        </div>
    </div>

    <script src="scripts/popup.js"></script>
</body>
</html>